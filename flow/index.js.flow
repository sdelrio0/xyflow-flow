// @flow

import type { ComponentType } from 'react';
import type {
  Node,
  Edge,
  ReactFlowProps,
  ReactFlowInstance,
  NodeTypes,
  EdgeTypes,
  ConnectionLineComponent,
  OnNodesChange,
  OnEdgesChange,
  OnConnect,
  OnConnectStart,
  OnConnectEnd,
  OnInit,
  OnMove,
  OnMoveStart,
  OnMoveEnd,
  OnSelectionDragStart,
  OnSelectionDrag,
  OnSelectionDragStop,
  OnSelectionChangeFunc,
  NodeMouseHandler,
  EdgeMouseHandler,
  ConnectionMode,
  ConnectionLineType,
  PanOnScrollMode,
  SelectionMode,
  FitViewOptions,
} from './react';

// Re-export all types from system and react
export type * from './system';
export type * from './react';

// Export component declarations
declare export class ReactFlow extends React$Component<ReactFlowProps> {}
declare export class Handle extends React$Component<HandleProps> {}
declare export class EdgeText extends React$Component<EdgeTextProps> {}
declare export class StraightEdge extends React$Component<StraightEdgeProps> {}
declare export class StepEdge extends React$Component<StepEdgeProps> {}
declare export class BezierEdge extends React$Component<BezierEdgeProps> {}
declare export class SimpleBezierEdge extends React$Component<SimpleBezierEdgeProps> {}
declare export class SmoothStepEdge extends React$Component<SmoothStepEdgeProps> {}
declare export class BaseEdge extends React$Component<BaseEdgeProps> {}
declare export class ReactFlowProvider extends React$Component<{children: React$Node}> {}
declare export class Panel extends React$Component<PanelProps> {}
declare export class EdgeLabelRenderer extends React$Component<{children: React$Node}> {}
declare export class NodeResizer extends React$Component<NodeResizerProps> {}
declare export class NodeToolbar extends React$Component<NodeToolbarProps> {}
declare export class Controls extends React$Component<ControlsProps> {}
declare export class MiniMap extends React$Component<MiniMapProps> {}
declare export class Background extends React$Component<BackgroundProps> {}

// Export utility functions
declare export function useReactFlow(): ReactFlowInstance;
declare export function useNodes(): [Array<Node>, OnNodesChange];
declare export function useEdges(): [Array<Edge>, OnEdgesChange];
declare export function useViewport(): Viewport;
declare export function useOnSelectionChange(onChange: OnSelectionChangeFunc): void;
declare export function useOnViewportChange(onChange: (viewport: Viewport) => void): void;
declare export function useStore<T>(selector: (state: ReactFlowState) => T): T;
